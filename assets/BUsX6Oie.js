import{p as c,d as u,u as l,a as m,r as v,o as f,s as a,b as g,c as x,e as y,f as i,g as w,n as A}from"./CP-E3HJN.js";const _=c("/odixApp.svg"),h=c("/appstore.png"),k={class:"flex flex-col items-center justify-center"},U=u({__name:"index",setup(I){const{$uaParser:t}=l(),s=m(),d=w();let r;const e=v({userAgent:"",ipAddress:"",clickTime:"",deviceInfo:{},userId:""}),p=async()=>{try{const o=await $fetch(d.public.apiUrl,{credentials:"omit",mode:"cors",method:"POST",body:JSON.stringify({ip:e.ipAddress,referralCode:s.query.code||"",userAgent:e.userAgent,clickTime:e.clickTime,deviceSpecs:e.deviceInfo,inviterId:s.query.id||"",deviceId:e.userId,deviceModel:e.deviceInfo.deviceModel,deviceBrand:e.deviceInfo.deviceVendor}),headers:{"Content-Type":"application/json"}});r=setTimeout(()=>{A("https://apps.apple.com/us/app/odixpay-crypto-wallet-card/id6736972556",{external:!0})},3e3)}catch(o){return a({statusCode:o.statusCode,statusMessage:"Something went wrong"})}};return f(async()=>{if(!s.query.id||!s.query.code)return a({statusCode:404,statusMessage:"Not Found"});const n=await(await fetch("https://api.ipify.org?format=json")).json();e.ipAddress=n.ip,e.userAgent=navigator.userAgent,e.clickTime=new Date().toISOString(),e.userId=s.query.id,e.deviceInfo={deviceType:t.device.type||"Desktop",deviceVendor:t.device.vendor||"Unknown Vendor",deviceModel:t.device.model||"Unknown Model",os:t.os.name+"__"+t.os.version||"Unknown OS",browserName:t.browser.name||"Unknown Browser",cpu:t.cpu.architecture||"Unknown CPU"},await p()}),g(()=>{clearTimeout(r)}),(o,n)=>(y(),x("div",k,n[0]||(n[0]=[i("div",{class:"flex items-center justify-center mb-4 space-x-[-32px] drop-shadow-md"},[i("img",{src:_,class:"size-[74px]"}),i("img",{class:"size-[74px]",src:h,alt:""})],-1),i("h1",{class:"text-xl font-[300] text-gray-800 text-center capitalize loading mx-auto relative"},"Redirecting to AppStore",-1)])))}});export{U as default};
