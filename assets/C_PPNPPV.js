import{p as c,d as u,u as l,a as m,r as v,o as g,s as a,b as f,c as y,e as w,f as i,g as x,n as k}from"./DB-bE5xw.js";const h=c("/odixApp.svg"),A=c("/appstore.png"),_={class:"flex flex-col items-center justify-center"},U=u({__name:"index",setup(I){const{$uaParser:s}=l(),t=m(),d=x();let r;const e=v({userAgent:"",ipAddress:"",clickTime:"",deviceInfo:{},userId:""}),p=async()=>{try{const o=await $fetch(d.public.apiUrl,{method:"POST",body:JSON.stringify({ip:e.ipAddress,referralCode:t.query.code||"",userAgent:e.userAgent,clickTime:e.clickTime,deviceSpecs:e.deviceInfo,inviterId:t.query.id||"",deviceId:e.userId,deviceModel:e.deviceInfo.deviceModel,deviceBrand:e.deviceInfo.deviceVendor}),headers:{"Content-Type":"application/json",credentials:"omit",mode:"cors"}});r=setTimeout(()=>{k("https://apps.apple.com/us/app/odixpay-crypto-wallet-card/id6736972556",{external:!0})},3e3)}catch(o){return a({statusCode:o.statusCode,statusMessage:"Something went wrong, Please check your link"})}};return g(async()=>{if(!t.query.id||!t.query.code)return a({statusCode:500,statusMessage:"Something went wrong, Please check your link"});const n=await(await fetch("https://api.ipify.org?format=json")).json();e.ipAddress=n.ip,e.userAgent=navigator.userAgent,e.clickTime=new Date().toISOString(),e.userId=t.query.id,e.deviceInfo={deviceType:s.device.type||"Desktop",deviceVendor:s.device.vendor||"Unknown Vendor",deviceModel:s.device.model||"Unknown Model",os:s.os.name+"__"+s.os.version||"Unknown OS",browserName:s.browser.name||"Unknown Browser",cpu:s.cpu.architecture||"Unknown CPU"},await p()}),f(()=>{clearTimeout(r)}),(o,n)=>(w(),y("div",_,n[0]||(n[0]=[i("div",{class:"flex items-center justify-center mb-4 space-x-[-32px] drop-shadow-md"},[i("img",{src:h,class:"size-[74px]"}),i("img",{class:"size-[74px]",src:A,alt:""})],-1),i("h1",{class:"text-xl font-[300] text-gray-800 text-center capitalize loading mx-auto relative"},"Redirecting to AppStore",-1)])))}});export{U as default};
